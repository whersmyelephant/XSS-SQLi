{% extends "base.html" %}

{% block title %}Administration{% endblock %}

{% block content %}
<section class="admin-section">
    <h2><i class="fas fa-lock"></i> Panneau d'administration</h2>
    
    <div class="admin-warning">
        <i class="fas fa-exclamation-circle"></i>
        <p>Cette section est réservée aux administrateurs</p>
    </div>
    
    <div class="admin-search">
        <h3><i class="fas fa-search"></i> Rechercher un utilisateur</h3>
        <form method="GET">
            <div class="search-box">
                <input type="text" name="search" placeholder="Rechercher par nom..." value="{{ request.args.get('search', '') }}">
                <button type="submit"><i class="fas fa-search"></i></button>
            </div>
        </form>
    </div>
    
    <div class="users-list">
        <h3><i class="fas fa-users"></i> Liste des utilisateurs</h3>
        
        {% if users %}
        <table class="users-table">
            <thead>
                <tr>
                    {% if is_search %}
                        {# Mode recherche - affichage complet #}
                        <th>ID</th>
                        <th>Username</th>
                        <th>Full Name</th>
                        <th>Email</th>
                        <th>Role</th>
                        <th>Phone</th>
                        <th>Birthdate</th>
                        <th>SSN</th>
                        <th>Address</th>
                    {% else %}
                        {# Mode normal - données limitées #}
                        <th>ID</th>
                        <th>Username</th>
                        <th>Full Name</th>
                        <th>Email</th>
                        <th>Role</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    {% if is_search %}
                        {# Mode recherche - données complètes #}
                        <td>{{ user.id }}</td>
                        <td>{{ user.username }}</td>
                        <td>{{ user.full_name }}</td>
                        <td>{{ user.email }}</td>
                        <td>{{ user.role }}</td>
                        <td>{{ user.phone }}</td>
                        <td>{{ user.birthdate }}</td>
                        <td>{{ user.ssn }}</td>
                        <td>{{ user.address }}</td>
                    {% else %}
                        {# Mode normal - données limitées #}
                        <td>{{ user.id }}</td>
                        <td>{{ user.username }}</td>
                        <td>{{ user.full_name }}</td>
                        <td>{{ user.email }}</td>
                        <td>{{ user.role }}</td>
                    {% endif %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div class="no-results">
            <i class="fas fa-info-circle"></i>
            <p>Aucun utilisateur trouvé</p>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}